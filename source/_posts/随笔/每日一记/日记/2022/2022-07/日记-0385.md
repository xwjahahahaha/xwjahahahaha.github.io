---
title: 日记_0385
tags:
  - 每日一记
categories:
  - 随笔
  - 每日一记
toc: true
date: 2022-07-05 09:37:54
---

## 学习规划:

<!-- more -->

3～4月

- [x] 找到一份暑期实习(网易)

5～6月

- [x] 论文修改重新投稿 5.3
  - [x] 5.16 退修
  - [ ] 7.4 录用修改

6～7月

- [ ] 实习
  - [ ] kube-eagle项目

- [ ] 两个项目
  - [ ] runC源码
- [ ] 基础知识
  - [ ] linux内核源码 => 《深入理解linux内核》


## 这段时间的待完成任务：

- [ ] 工作
  - [ ] eBPF调研2周 （5-17~5-25）要以任务为核心，而不是系统发散性的学习
    - [ ] eBPF演讲
    - [ ] 各种语言输出调研`profile`
    - [ ] `profile.py`原理
  - [ ] 目标
    - [ ] 实现一个分布式`profile`（适应多语言），可以使用到云原生场景下

## 今日完成的任务：

- [ ] 工作
  - [ ] profile
    - [x] 取容器所有Pid还是主要的Pid？
      - [x] 默认profile一个容器的主进程
      - [x] 所有进程作为可选项
    - [x] 解决kubectl-eagle的ip与端口问题
      - [x] ~~看一下k8s的内部ip概念，解决内部IP的场景(已用域名解决)~~
    - [x] 在开发集群部署好，给别人用
    - [ ] 优化agent
      - [ ] 不同采集器接口化
        - [x] ebpf
        - [ ] aysnc-profile
          - [ ] 直接runcmd start阻塞的主要原因在于：会创建fdtransfer和jattach两个子进程, 后者立马结束，但是fdtransfer是一个常驻进程，所以一直存在，导致父进程一直阻塞，解决办法是分解单独执行（将具体的命令拆解出来）
      - [ ] 程序编程语言类型判断优化
      - [ ] 单核profile的优化：需要持久性的Profile进程在某个CPU核上的数据
        - [ ] 目标是CPU单核，而不是进程，并且只采集一个阈值以上
        - [ ] 因为IOMMA
    - [ ] Async-profile问题
      - [ ] 总是返回`[ERROR] Perf events unavailable` 200
        - [x] 目前定位到`perfEvent_linux.cpp:843`
    - [ ] 适配Python ***
      - [ ] py-spy profile容器中的进程
    - [x] 演讲（7月5日）
      - [x] 由ELF文件字段 => 符号表识别/调用栈过程 => 整体profile的逻辑 
      - [x] 分别阐述
        - [x] BPF详细阐述
        - [x] Async-profile的逻辑原理（简单阐述）
        - [x] py-spy原理（简单阐述）
      - [x] unknow问题解决-原理深入
        - [x] 读懂符号表识别逻辑 BCC
          - [x] 1.调用栈回溯逻辑
          - [x] 2.符号表解析逻辑
      - [x] 添加perf-event基本原理
      - [x] 添加符号表解析逻辑的梗概
      - [x] 做个PPT要偏向原理底层 
        - [x] PPT大纲
    - [ ] 确定数据格式（暂缓到二期）
      - [ ] nosql格式适配[speedscope](https://github.com/jlfwong/speedscope)
      - [ ] VictoriaMetrics
        - [ ] 多个label实现多层分级
        - [ ] 数据存储到VictoriaMetrics
  - [ ] 极客时间专栏（暂缓）
    - [ ] 04-运行原理
    - [ ] 05-编程接口
    - [ ] 06-事件触发
  - [ ] 容器安全
    - [ ] kubecon视频
      - [ ] 容器安全LSM+BPF视频课记录
    - [ ] 《security_observability_with_ebpf》(看完)
- [ ] self
  - [ ] 算法两题
    - [x] [剑指 Offer 52. 两个链表的第一个公共节点](https://leetcode.cn/problems/liang-ge-lian-biao-de-di-yi-ge-gong-gong-jie-dian-lcof/)
  - [ ] 论文修改：
    - [x] 7月6号之前 交稿费
    - [ ] 最后的修改 7月2号
  - [ ] runC源码项目
    - [ ] OCI 镜像格式标准文件包 bundles
  - [ ] c基础
    - [ ] [makefile基础](https://seisman.github.io/how-to-write-makefile/overview.html#id2)
  - [ ] 看书 
    - [ ] 《深入理解计算机系统》
      - [ ] 第七章 链接 
    - [ ] 《C语言程序设计现代方法》
      - [ ] 第八章 数组
      - [ ] 第九章 函数
      - [ ] 第十章 程序结构
    - [ ] 《深入理解linux内核》
      - [x] 第二章 内存寻址（部分）

