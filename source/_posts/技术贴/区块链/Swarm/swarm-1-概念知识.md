---
title: swarm-1-概念知识
tags:
  - swarm
categories:
  - technical
  - swarm
toc: true
declare: true
date: 2021-05-12 14:07:08
---

> 学习资料原文与链接:
>
> https://gateway.ethswarm.org/bzz/latest.bookofswarm.eth/
>
> https://swarm.ethereum.org/#section-ecosystem
>
> https://www.chainnews.com/articles/227689130917.htm?share_token=dd91ac29-f839-4956-8ec6-cebfceabd795

# 一、基本概念

## 简介

![LiGCOI](http://xwjpics.gumptlu.work/qinniu_uPic/LiGCOI.png)

首先 Swarm 是以太坊项目官方的一部分，它主要是由以太坊基金会领投和开发，允许矿池存储、带宽和算力资源来支持基于以太坊网络的应用。从一开始，它就被认为是与以太坊和 Whisper 一起，定义了 Web 3.0 组件的三大支柱之一。

“如果说以太坊是全球计算cpu, 那么Swarm的目标就是它的**硬盘**”

Swarm 团队试图创建一个**不停机、零故障和防审查的点对点存储和服务解决方案**。<font color='#e54d42'>**在 Swarm 内创建一个经济激励的系统将促进资源交换价值的支付和转移。**</font>项目使用了以太坊区块链中不同的协议和技术。Swarm 的存在使互联网可以再次分散化，Swarm 的长期愿景是成为重新分散的 Internet 的操作系统。它将为数据的供应链经济性提供可扩展且可自我维持的基础架构。

<!-- more -->

## 项目目标

Swarm 的主要目标是**提供充分分散和冗余存储的以太坊公共记录**，**尤其是存储和分发 DApp 的代码和数据以及区块链数据**。从经济角度来看，它**允许参与者有效汇集他们的存储容量和带宽资源，以给网络的所有参与者提供这些服务，同时接受以太坊的激励。**

Swarm 更广泛的目标，是**为去中心化的 Web 应用程序 (DApp) 开发人员提供基础设施服务，特别是：消息传递、数据流、点对点记账、可变资源更新、存储保险、监管扫描和修复、支付渠道和数据库服务。**

以太坊对世界计算机的愿景，构成了即将到来的**数据场景的无需信任（即完全可信任）结构**：**支持数据存储，传输和处理的全球基础架构。**

## 数据存储

从开发人员的角度来看，Swarm 最好地看作是**公共基础结构**，它为 Web 2.0 时代所熟悉的实时交互式 Web 应用程序提供了动力。**它为作为复杂应用程序<font color='#e54d42'>构建块的基元</font>提供了低级 API，并为基于 Swarm 的 Web 3.0 开发堆栈的工具和库提供了基础。**API 和工具旨在允许从任何传统的 Web 浏览器访问 Swarm 网络，因此 Swarm 可以立即提供私有和分散的替代方法来替代当今的 World Wide Web （WWW）。

swarm为自我主权的数字社会的提供分布式存储与通信, 作为分布式网络的后端存储栈

目标是构建一个人人平等、容错、弹性可拓展的互联网底层激励机制

## 架构

![0PoWcs](http://xwjpics.gumptlu.work/qinniu_uPic/0PoWcs.png)

1. 对等网络协议，用作底层传输，

2. 具有协议的覆盖网络，该协议为块（固定大小的数据块）的分布式不可变存储提供支持，

3. 提供**高层数据访问并为基本层功能定义 API 的组件**

4. 定义标准的应用程序层，并概述更精细的用例的最佳实践。



# 二、Incentives激励模式

没有货币的新用户可以为其他节点提供服务，直到他们积累足够的货币来使用自己的服务

Swarm 总体激励设计图:

![z1ImLW](http://xwjpics.gumptlu.work/qinniu_uPic/z1ImLW.jpg)

总体激励总结:

![激励机制](http://xwjpics.gumptlu.work/qinniu_uPic/激励机制.png)

## 1. Sharing bandwidth 分享带宽

### 1.1 Incentives for serving and relaying 服务与接力的激励

#### 1.1.1 Forwarding kademlia and repeated dealings

**付费检索:** 检索区块的成本由发起人提供

块的检索可以被视为一个功能单元，其中存储者充当服务提供者，请求者充当消费者。

块检索需要中继转发时, 对于转发的节点也需要激励

----

#### 1.1.2 **反向响应收费(charging for backwarded response):**

![aquawr](http://xwjpics.gumptlu.work/qinniu_uPic/aquawr.png)

激励检索。节点D (Downloader)向块的地址发送一个检索请求。检索使用转发，所以请求通过转发节点F0，…从Fn一直到节点S，即**最接近**块地址的存储节点。块通过沿着相同的路径传回到下载程序来传递。接收块响应将触发一个记帐事件。

Downloader请求不存在的区块则会给予制裁

一旦一个节点发起(启动或转发)一个请求，如果**该块在定义的生存时间(TTL)内被交付，它就可以获得该块支付费用，**因此，当该块被传递回来时，就不存在阻止及时交付的动机(防止超时)

-----

### 1.2 **块检索定价协议(Pricing protocol for chunk retrieval)**

此部分是在Swarm网络中，节点用来传递它们的块的价格的协议。

#### 1.2.1 市场定价(Price discovery)

它允许市场定价机制仅**基于本地决策**，这是必要的，原因如下:

1. 带宽成本在世界各地是不同的:允许节点通过其价格表达其成本结构将使价格和质量竞争，最终使终端用户受益。

2. 由于使用率或连通性的波动，对带宽资源的需求是不断变化的。

3. 能够直接对变化做出反应，就能创造一个**自我调节的系统。**

> 防止节点负责者在节点费用成本上升时关闭节点来保护自己的利润,而对整个系统造成服务的缺失

引入了一个协议消息，它可以将这些价格传递给上游对等点(见8.4)。我们可以将此消息概念化为对请求的另一种响应。<font color='#e54d42'>**节点为每个邻近距离维护与每个对等体相关联的价格**，因此当它们发出检索请求时，它们已经知道下游对等体在生存期内成功交付有效块时承诺支付的价格。</font>

为了防止价格变化消息充斥上游对等体的DoS攻击(让上游节点只接受和处理消息变化消息)，**价格消息的速率被限制**。

<font color='#e54d42'>表现良好、价格有竞争力的节点受到同行的青睐;如果一个节点的价格设定过高，或者其价格的波动性比网络中的其他节点高得多，那么其他节点就不太愿意向它们请求区块.</font>

根据每个节点的价格波动性与合作成功率相关

表现良好、价格有竞争力的节点受到同行的青睐;如果一个节点的价格设定过高，或者其价格的波动性比网络中的其他节点高得多，那么同行将不太愿意请求

---

#### 1.2.2 差别定价(Differential pricing of proximities)

如果在一个区域内请求一个块的价格相同,那么除了可能缓存块并通过转售它来赚取收入之外，**节点没有转发请求的真正动机**。对于新块来说，这个选项是不合理的，特别是当它们处于一个节点的浅层邻近顺序时，它们不太可能被请求。更重要的是，如果区块的定价在邻近的订单中是统一的，合谋的节点可以产生区块流量，并捕获它们发送的数据，这实际上是一次免费的DoS攻击(见图21)。

![rywTPZ](http://xwjpics.gumptlu.work/qinniu_uPic/rywTPZ.png)

在邻近地区统一的块价格将允许DoS攻击。攻击者可以通过向S(只有S可以提供服务)发送检索请求，在两个节点D和S之间创建一个流量。如果相邻区域的价格相同，则这种攻击不会给攻击者带来任何成本。

> 因为节点之间的价格都相同,所以可以不考虑距离而随意的转发

为了减少这种攻击，当请求从请求者路由到存储者时，**请求者为块付出的代价必须严格大于存储节点所得到的补偿。**

我们需要有一个奖励转发节点的定价方案，因此，这就需要对节点进行差异化定价

在这个定价模型中，<font color='#e54d42'>**如果对等端距离块地址更远，交付成本更高，也就是说，对块交付的奖励是一个接近度递减的函数。**</font>

---

#### 1.2.3 同类产品价格的一致性(Uniformity of price across peers)

1. 在整个网络中对于相同的邻近顺序(OP)的统一价格

2. 价格作为邻近性的函数线性下降

3. 节点可以增加连接性并保持价格较低。

通过这种方式，奖励机制的设计使得有利于单个节点的策略也被整齐地对齐，从而有利于整个系统的健康发展。

#### 1.2.4 容器密度(bin density)

 基于下游对等体与区块的邻近性进行计费导致一个转发请求的距离越远，我们赚的就越多。这种动机与下载者的兴趣相一致，即在服务他们的请求时节省跳跃，从而降低延迟交付和带宽开销。**节省跳数将改善延迟，并使对等端更有效率**

#### 1.2.5 缓存和伸缩 Caching and auto-scaling

**节点每服务一个数据块就会获得奖励，因此数据块的盈利能力与它的受欢迎程度成正比:数据块被请求的频率越高，相对于每个时间单位存储的固定成本，其奖励就越高。当节点达到存储容量限制，并决定删除哪些块时，理性利润最大化代理的最优策略是删除利润率最低的块。**

为了最大化可选择的块集，节点会有机会缓存它们所传递的数据以及它们同步的数据块。这将导致流行内容更广泛地传播和更快地服务，使整个群体成为一个自动扩展和自动平衡的内容分发网络。

#### 1.2.6 非缓存节点 Non-caching nodes

非缓存节点: 仅转发功能,不缓存节点

任何留给中继节点利润的方案都为仅转发的非缓存节点进入网络创造了积极的激励。这样的节点对网络并没有本质上的好处，因为它们会产生不必要的带宽开销。一方面，它们的存在原则上可以减轻存储节点重新铺设通信量的负担，因此在浅箱中使用它们可能没有坏处。

另一方面，在邻近深度更接近的情况下，它们的同行会倾向于为它们提供缓存/存储节点，因为至少在它们假设的责任区域内，它们的缺点是不适合块。**非缓存节点也有助于增加匿名性(见2.3.1)。**

### 1.3 Incentivising push-syncing 推-同步激励

推同步是一种协议，它**确保上传到网络的数据块到达其正确的地址**。

推同步协议类似于检索协议，它们各自的消息交换序列通过相同的路由。推送同步协议中的数据块传递类似于检索请求，相反，推送同步中的保管接收语句类似于检索中的数据块传递响应。

## 2. Swap: accounting and settlement 交换:账户与结算

### 2.1 Peer to peer accounting

一种机制来跟踪对等点之间的数据流量，并为消息中继提供对等**计费**。

### 2.2 Cheques as off-chain commitments to pay

区块链网络中直接链上支付的一个主要问题是，每笔交易都必须由参与网络的每个节点来处理，导致交易成本很高。然而，创建支付而不在链上显示这种支付是可能的。这种支付被称为第二层支付策略。其中一种策略是**延迟付款并批量处理**。为了降低成本，受益人必须愿意承担更高的结算失败风险。

….

## 3. storage incentives 存储激励

见总结图

## summary

基础层提供以下服务:

1. 参与与访问不需要许可
2. 节点运营商零现金进入
3. 最大的资源利用率
4. 数据的负载均衡分布
5. 拓展性
6. 审查阻力和存储和检索的隐私
7. 自动拓展受欢迎的内容
8.  基本合理的推诿和保密
9. 在一个动态网络中，节点的阻力和最终一致性
10. 由于内在的经济激励，无需干预的可持续性
11. 稳健的私人对等会计
12. 激励带宽共享
13. 链上结算的链外微承诺
14. DoS抵抗和垃圾邮件保护
15. 积极的(即受到奖励的)储存激励
16. 消极的(即通过威胁惩罚措施来劝阻)对数据丢失的激励。

