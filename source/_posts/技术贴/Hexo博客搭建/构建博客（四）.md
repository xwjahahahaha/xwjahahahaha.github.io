---
title: 构建博客（四）
date: 2020-05-25 16:51:14
tags:
    - hexo
categories: 
    - technical
    - blog 
toc: true
---

## 四、博客后续添加的内容

### 1.对于`hexo new XXX`默认生成头部前缀的修改
每次new新的md都会默认在前面添加前缀：
   
    ---
    title: {{ title }}
    date: {{ date }}
    tags:
    ---

但是我个人希望有一个分类`categories`还有`toc`（是否开启目录），所以修改方法如下：

<!-- more -->

找到根目录下的`scaffolds`文件夹，其中的post.md就是默认的模板，draft.md就是默认的草稿模板，自行修改即可。

还可以自己写自己要用的模板：

例如：我添加了一个写技术贴的模板
在`scaffolds`文件夹下自己创建一个`tech.md`文件，然后写好前缀格式：

    ---
    title: {{ title }}
    date: {{ date }}
    tags:
        -
    categories: 
        -
        -technical
    toc: true
    ---

    ##

    ###

    <!-- more -->

    ###

    ###

每次想写技术贴文章就用`hexo new tech XXX`即可

这样每次生成的md文件就很方便啦~

### 2.hexo博客多个标签与分类的问题

首先记住一句话：标签是没有层次的，而分类是有层次的

多个标签可以使用：`tags: [xxx, xxx, xxx] `

也可以使用：

```
tags: 
    -xxx
    -xxx
    -xxx
```

同理分类categories也是如此

但是，分类的话这两种方法在前面的会作为父分类，后面的逐级作为子分类

![](http://xwjpics.gumptlu.work/qiniu_picGo/20200525170404.png)

详见：https://www.jianshu.com/p/bff1b1845ac9

### 3. 一个坑：github仓库中的文件名是不区分大小写的

也就是说，如果你的本地生成的public中是小写名字的文件（例如readme.md）但之前github仓库中你已经上传了文件（README.md），之后你除非改变名字（不是改变大小写），否则上传部署github会认为你没有添加新内容。

所以今天就遇到了一个问题：标签我改为了blog小写，也重新生成了public，但是在博客中点击小的blog始终404，因为github仓库中的为大写的Blog.....

我的解决方法是：先把所有小写的blog修改为其他名字，例如blog11（不要仅改变大小写），然后再把所有的改回来blog，这样就把github仓库中的大写文件给刷掉了。

网上还有其他方法，要用git删除或是修改大小写识别，我觉得麻烦就没用了，想用的话可自行搜索。

***

### 4.top文章置顶功能

修改Hexo文件夹下的
`node_modules/hexo-generator-index/lib/generator.js`为：

```
'use strict';

var pagination = require('hexo-pagination');

module.exports = function(locals) {
  var config = this.config;
  var posts = locals.posts.sort(config.index_generator.order_by);

  posts.data = posts.data.sort(function(a, b) {
      if(a.top && b.top) {
          if(a.top == b.top) return b.date - a.date;
          else return b.top - a.top;
      }
      else if(a.top && !b.top) {
          return -1;
      }
      else if(!a.top && b.top) {
          return 1;
      }
      else return b.date - a.date;
  });

  var paginationDir = config.pagination_dir || 'page';
  var path = config.index_generator.path || '';

  return pagination(path, posts, {
    perPage: config.index_generator.per_page,
    layout: ['index', 'archive'],
    format: paginationDir + '/%d/',
    data: {
      __index: true
    }
  });
};
```

然后在写文章的时候在对应的开头加上top即可，序号从小到大

今日完成的任务：
> 1. ~~博客的总阅读量和访客数~~
> 2. ~~上一页下一页的修改~~
> 3. ~~博客的分类的整理~~
> 4. ~~java的复习回顾（到线程了）~~
> 5. ~~LeetCode一题~~

明日任务：
> 1. python明天就到了，正式开始
> 2. java复习，继续学习,要开始新课了！
> 3. 机器学习吴恩达
> 4. 看看博客还能不能美化了吧
> 5. leetcode每日一题哦~


*今天11点起床，今日校园都没填，差点被骂死。*

*最近怎么这么困，特别看书的时候，今晚早点休息了~*