---
title: 函数式编程的一个简单例子
tags:
  - java
categories:
  - technical
  - java
toc: true
date: 2020-06-01 15:04:52
---

## 使用Lambda延迟优化

<!-- more -->

```java
public class Lambda_Text {

    //日志的案例，使用Lambda优化

    //普通的显示日志的方法
    public static void showLog(int level, String message){
        if(level == 1) {
            System.out.println(message);
        }
    }

    //使用Lambda延迟优化的方法
    public static void showLog2(int level, MyStringBuilderInterFace mbi){
        if(level == 1){
            //！！！注意：只有满足条件（level == 1）才会调用方法进行字符串的拼接
            System.out.println(mbi.getStringBuilder());
        }
    }

    public static void main(String[] args) {
        String message1 = "hello";
        String message2 = "world";
        String message3 = "Java";

        //满足条件可以正常显示
//        showLog(1, message1+message2+message3);

        //此方法被调用，拼接了字符串，但是没有任何结果，拼接过程造成了浪费
        showLog(2, message1+message2+message3);


        //使用优化的方法显示
        //lambda的简写,因为判断不满足，所以不调用接口实现类方法，所以不会拼接字符串，提高效率
        showLog2(2, ()->message1+message2+message3);
    }
}
```
## Lambda使用的两种情况

1. 方法的参数为一函数式接口，调用方法使用Lambda优化

  ```java

  public class Lambda_Text1_Runnable {
      //函数式接口(Runnable)作为方法参数
      public static void threadStart(Runnable r){
          new Thread(r).start();
      }

      public static void main(String[] args) {
          threadStart(()-> System.out.println(Thread.currentThread().getName() + "已经启动！"));
      }

  }
  ```

2. 方法的返回值为一函数式接口的实现的对象，可采用Lambda优化

  ```java

  import java.util.*;

  public class Lambda_Text_Comparator {
      //使用函数式接口的实现对象作为方法的返回值

      public static Comparator<String> getComparator(){
          //第一种： 创建匿名内部类
  //        return new Comparator<String>() {
  //            @Override
  //            public int compare(String o1, String o2) {
  //                return o2.length() - o1.length();
  //            }
  //        };

          //第二种：Lambda优化
  //        return (String o1, String o2)->{
  //            return o2.length() - o1.length();
  //        };
  //
          //第三种：再简写
          return (o1, o2) ->  o2.length() - o1.length();
      }

      public static void main(String[] args) {
          String[] strings = {"aaa", "bbbb", "ccccc", "ddddddddd"};
          System.out.println(Arrays.toString(strings)); //[aaa, bbbb, ccccc, ddddddddd]
          Arrays.sort(strings, getComparator());
          System.out.println(Arrays.toString(strings)); //[ddddddddd, ccccc, bbbb, aaa]
      }

  }

  ```


> 作者：gumptlu

> 转载请注明出处！