---
title: eBPF-5-性能分析方法论
tags:
  - null
categories:
  - technical
  - null
toc: true
declare: true
date: 2022-05-24 09:20:06
---

[TOC]

<!-- more -->

> 参考：
>
> * 《BPF之巅》

# 一、概览

## 1. 性能分析目标是什么？

改善用户体验和运营成本，说白了就是提高效率

最好能对目标量化，定义当前距离目标的差距，或者说是否已经达到性能优化目标

量化指标一般包括：

* 延迟
* 速率
* 吞吐量
* 利用率
* 成本

## 2. 常见性能分析方法论

### 2.1 业务负载画像

最终目的：

* 理解实际运行的业务负载，而不需要对最终的性能结果分析

一般的步骤

* 负载是是谁产生的(如：进程`ID`、进程名、`IP`地址等)
* 负载为什么会产生(如：代码路径、调用栈、火焰图)
* 负载的组成是什么？（如：吞吐量、负载类型）
* 负载怎样随时间变化？

### 2.2 下钻分析

从一个指标开始，将这个指标拆分为多个组成部分，然后将最大的组件进一步拆分为更小的组件，不断重复这个过程，直到定位出一个或者多个原因

### 2.3 USE方法论

针对每一个资源：

* 使用率
* 饱和度
* 错误

绘制一幅软件和硬件的资源图，然后依次针对所有的资源查询上述三个指标å

### 2.4 检查清单法

列出一系列的工具和指标，用于对照运行和检查
