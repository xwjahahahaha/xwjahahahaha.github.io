---
title: 百度一面总结(凉)
tags:
  - null
categories:
  - technical
  - null
toc: true
declare: true
date: 2021-11-26 15:13:00
---

1. go并发编程薄弱
2. 云原生岗位：操作系统熟悉是刚需
3. 刷算法题

<!-- more -->

> // 阶段1
> // 1个goroutine输入一个数组(数字) 读出其中数放入channel
>
> // 阶段2
> // 2个goroutine从chan读取数字 取平方
>
> // 阶段3
> // 1个goroutine取两个goroutine中的数平方输出
>
> // 要求：三个阶段并行
>
> // 例如: 输入: 1, 2, 3, 4, 5 输出: 1, 4, 9, 16, 25

```go
package main

import (
	"fmt"
)

func main() {
	nums := []int{1, 2, 3, 4, 5}
	writeChan := make(chan int, 1)
	readChan1 := make(chan int, 1)
	readChan2 := make(chan int, 1)
	overChan := make(chan bool, 1)
	go work1(nums, writeChan)
	go work2(writeChan, readChan1)
	go work2(writeChan, readChan2)
	go work3(readChan1, readChan2, overChan)
	<-overChan
	fmt.Println("over.")
}

func work1(nums []int, ch chan<- int) {
	for i := 0; i < len(nums); i++ {
		ch <- nums[i]
	}
	close(ch)
}

func work2(writeChan chan int, readChan chan<- int) {
	for {
		if num, ok := <-writeChan; ok {
			readChan <- num * num
		} else {
			break
		}
	}
	close(readChan)
}

func work3(readChan1 chan int, readChan2 chan int, overChan chan bool) {
	for {
		var flag int
		if num, ok := <-readChan1; ok {
			fmt.Println(num)
		} else {
			flag++
		}
		if num, ok := <-readChan2; ok {
			fmt.Println(num)
		} else {
			flag++
		}
		if flag == 2 {
			overChan <- true
			break
		}
	}
}
```

