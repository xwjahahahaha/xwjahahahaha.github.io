---
title: 326.3的幂
tags:
  - java
categories:
  - technical
  - leetcode
toc: true
date: 2020-06-22 17:40:51
---

## 题目描述
给定一个整数，写一个函数来判断它是否是 3 的幂次方。

示例 1:

输入: 27
输出: true
示例 2:

输入: 0
输出: false
示例 3:

输入: 9
输出: true
示例 4:

输入: 45
输出: false

> 链接：https://leetcode-cn.com/problems/power-of-three/solution/3de-mi-by-leetcode/

> 来源：力扣（LeetCode）
<!-- more -->

## 思路以及代码

1. 直观的思路： 循环判断是否相等  打败43% 时间复杂度O(log3N)

    ```java
    class Solution {
        public boolean isPowerOfThree(int n) {
            if (n == 1) return true;
            // 判断是不是三的倍数，能够筛除掉一部分的数，减少时间复杂度
            if(n % 3 != 0) return false;
            for(int i=1; i <= n; i*=3)
                if(i==n) return true;
            return false;
        }
    }
    ```
2. 第二种思路： 使用规律  时间复杂度O(log3N) 空间复杂度O(log3N)(用了3进制数的字符串)

    有一数学的规律可以利用：

    对于任何进制都有一个规律：**x进制下的x的幂次方首位都为1其后全部为0**

    例如：10进制下，10的1次方 = 10，二次方 = 100, 1000, 10000......

    2进制下，2 = '1' , 4 = '10', 8 = '100',......

    实现此方法需要使用到三个java函数：

    `String baseChange = Integer.toString(number, base);`

    上面的代码将 number 转换以 base 为底的基数，并以字符串形式返回结果。例如，integer.toString（5，2）=“101” 和 integer.toString（5，3）=“12”。

    `boolean matches = myString.matches("123");`

    上面的代码检查字符串中是否存在特定的正则表达式。例如，如果字符串 mystring 中存在子字符串 “123”，上面的内容将返回 true。

    `boolean powerOfThree = baseChange.matches("^10*$")`

    我们将使用上面的正则表达式来检查字符串是否以1 ^1 开头，后跟 0 或 多个 0 0* 并且不包含任何其他值 $。

    ```java
    class Solution {
        public boolean isPowerOfThree(int n) {
        return Integer.toString(n, 3).matches("^10*$");
        }
    }
    ```
3. 第三种方法： 数学公式法 (这个方法好像有缺陷对于浮点数)  时间复杂度取决于log函数，空间复杂度O(1)

    小技巧： 判断一个数是否为整数-> 对1求余

    根据log函数的换底公式：

    ![](http://xwjpics.gumptlu.work/qiniu_picGo/20200626162426.png)

    ```java
    class Solution {
        public boolean isPowerOfThree(int n) {
            return (Math.log10(n) / Math.log10(3)) % 1 == 0;
        }
    }
    ```
4. 第四种方法： 最优  时间复杂度O(1) 空间复杂度O(1)

    因为方法传递的参数是整数4个字节，那么在整数可表达的最大值的范围内的3的幂次方的最大值为1162261467 = 3的19次方

    因为3是素数，所以3的19次方的因子为：1,3，3的平方， 3的三次方，... ，3的19次方 

    所以用最大的幂次方除以n，能够整除的话都是3的幂次方

    ```java
    class Solution {
        public boolean isPowerOfThree(int n) {
            return  n > 0 && 1162261467 % n == 0;
        }
    }
    ```