---
title: 20.有效的括号
tags:
  - golang
categories:
  - technical
  - leetcode
toc: true
date: 2021-11-08 21:38:45
---

## 题目描述

#### [20. 有效的括号](https://leetcode-cn.com/problems/valid-parentheses/)

难度简单

给定一个只包括 `'('`，`')'`，`'{'`，`'}'`，`'['`，`']'` 的字符串 `s`，判断字符串是否有效。

有效字符串需满足：

1. 左括号必须用相同类型的右括号闭合。
2. 左括号必须以正确的顺序闭合。

 <!-- more -->

**示例 1：**

```
输入：s = "()"
输出：true
```

**示例 2：**

```
输入：s = "()[]{}"
输出：true
```

**示例 3：**

```
输入：s = "(]"
输出：false
```

**示例 4：**

```
输入：s = "([)]"
输出：false
```

**示例 5：**

```
输入：s = "{[]}"
输出：true
```

 

**提示：**

- `1 <= s.length <= 104`
- `s` 仅由括号 `'()[]{}'` 组成

## 解题思路及代码

```go
// 栈
func isValid(s string) bool {
    stack := make([]byte, 0)
    isLeft := func(c byte) bool {
        if c == '(' || c == '[' || c == '{' {
            return true
        }
        return false
    }
    matched := func(l, r byte) bool {
        if l == '(' && r == ')' || l == '[' && r == ']' || l == '{' && r == '}' {
            return true
        }
        return false
    }
    for _, c := range []byte(s) {
        if isLeft(c) {
            // 左边直接入栈
            stack = append(stack, c)
        }else if len(stack)>0 && matched(stack[len(stack)-1], c){
            // 右边则判断
            // 匹配则出栈
            stack = stack[:len(stack)-1]
        }else {
            return false
        }
    }
    // 栈必须全部合并完才算正确
    if len(stack) == 0 {
        return true
    }
    return false
}
```

二刷：

```go
func isValid(s string) bool {
    stack := []byte{}
    for i:=0; i<len(s); i++ {
        if rightMatch(s[i]) == ' '{
            // 左括号直接加入
            stack = append(stack, s[i])
        }else {
            if len(stack) == 0 {
                // 第一个就是右括号，直接返回false
                return false
            }
            // 右括号匹配出栈
            top := stack[len(stack)-1]
            if top == rightMatch(s[i]) {
                stack = stack[:len(stack)-1]
            }else {
                return false
            }
        }
    }
    return len(stack)==0
}

func rightMatch(c byte) byte {
    switch c {
        case ')' : return '('
        case ']' : return '['
        case '}' : return '{'
        default : return ' '
    }
}
```



