---
title: 35_搜索插入位置
tags:
  - golang
categories:
  - technical
  - leetcode
toc: true
date: 2021-02-16 10:41:00
---

## 题目描述

#### [35. 搜索插入位置](https://leetcode-cn.com/problems/search-insert-position/)

难度简单

给定一个排序数组和一个目标值，在数组中找到目标值，并返回其索引。如果目标值不存在于数组中，返回它将会被按顺序插入的位置。

你可以假设数组中无重复元素。

<!-- more -->

**示例 1:**

```
输入: [1,3,5,6], 5
输出: 2
```

**示例 2:**

```
输入: [1,3,5,6], 2
输出: 1
```

**示例 3:**

```
输入: [1,3,5,6], 7
输出: 4
```

**示例 4:**

```
输入: [1,3,5,6], 0
输出: 0
```

## 解题思路及代码

二分法

时间复杂度O(logN)

空间复杂度O(1)

要理解二分法中的循环不变量，就是区间！这样边界问题就可以解决

```go
// //二分法 循环不变量：区间左闭右闭[l, r]
func searchInsert(nums []int, target int) int {
    l, r := 0, len(nums)-1
    if target < nums[0] {
        return 0
    }
    for l <= r {
        mid := l + (r - l) / 2
        if nums[mid] < target{
            l = mid + 1
        }else if nums[mid] > target{
            r = mid - 1
        }else{
            //1.目标值在数组区间中且对应数组中的元素，返回具体下标
            return mid
        }
    }
    //分情况讨论：
    //2. 目标值在数组区间之前即比第一个元素还小，那么此时推出循环一定为l=0, r=-1
    //3. 目标值在数组区间中但是没有对应的元素，那么一定是l=r+1，此时返回值就是r+1
    //4. 目标值在数组区间之后，那么此时一定是l=len(nums), r=l-1, 此时也返回r+1
    return r+1
    
}

//二分法 循环不变量 左闭右开[l, r)
func searchInsert(nums []int, target int) int {
    //注意r = len(nums)
    l, r := 0, len(nums)
    if target < nums[0] {
        return 0
    }
    //l == r 对于[l, r)是没有意义的
    for l < r {
        mid := l + (r - l) / 2
        if nums[mid] < target{
            l = mid + 1
        }else if nums[mid] > target{
            //因为右开，所以继续在[l, r)中寻找
            r = mid
        }else{
            //1.目标值在数组区间中且对应数组中的元素，返回具体下标
            return mid
        }
    }
    //分情况讨论：
    //2. 目标值在数组区间之前即比第一个元素还小，那么此时推出循环一定为l=0, r=0
    //3. 目标值在数组区间中但是没有对应的元素，那么一定是l=r，此时返回值就是r
    //4. 目标值在数组区间之后，那么此时一定是l=len(nums), r=l, 此时也返回r
    return r
    
}
```

