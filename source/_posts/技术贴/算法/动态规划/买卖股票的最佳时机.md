---
title: 买卖股票的最佳时机
tags:
  - java
categories:
  - technical
  - leetcode
toc: true
date: 2020-05-29 15:08:15
---

# 买卖股票的最佳时机（一）

## 题目描述

给定一个数组，它的第 i 个元素是一支给定股票第 i 天的价格。

如果你最多只允许完成一笔交易（即买入和卖出一支股票一次），设计一个算法来计算你所能获取的最大利润。

注意：你不能在买入股票前卖出股票。

<!-- more -->

示例 1:

> **输入**: `[7,1,5,3,6,4]`

>**输出**: 5

>**解释**: 在第 2 天（股票价格 = 1）的时候买入，在第 5 天（股票价格 = 6）的时候卖出，最大利润 = 6-1 = 5 。

>注意利润不能是 7-1 = 6, 因为卖出价格需要大于买入价格；同时，你不能在买入前卖出股票。


示例 2:

> **输入**: `[7,6,4,3,1]`

> **输出**: 0

> **解释**: 在这种情况下, 没有交易完成, 所以最大利润为 0。

## 解题思路

求序列中下标对（i,j）对应数的差额最大值，且保证i<j

## 代码
```java
class Solution {
    //第一种方法： 暴力枚举法  时间复杂度O(n*n) 空间复杂度O(1)
    public int maxProfit(int[] prices) {
        int i, j, maxPrices = 0;
        for(i = 0; i < prices.length; i++)
            for(j = i+1; j < prices.length; j++)
                if(prices[j] - prices[i] > maxPrices)
                    maxPrices = prices[j] - prices[i];
        return maxPrices;
    }
}
```
```java
class Solution {
    //第二种方法： 一次遍历   时间复杂度O(n) 空间复杂度O(1)
    //遍历每个元素时，判断其是否比当前记录的最小值小，是则记录，否则算差值再比较差值，找出最大差值
    public int maxProfit(int[] prices) {
        //初始化记录的最小值为数值最大值
        int recoMin = Integer.MAX_VALUE;
        int maxPrice = 0;
        for(int i = 0; i < prices.length; i++){
            if(prices[i] < recoMin)
                recoMin = prices[i];
            else if(prices[i] - recoMin > maxPrice)
                maxPrice = prices[i] - recoMin;
        }
        return maxPrice;      
    }
}
```

这一题的最佳解法与**求最大子序列和**的最佳解法（线性复杂度）有异曲同工之妙

点击跳转： [求最大子序列和](https://myblog.gumptlu.work/2020/05/29/%E6%8A%80%E6%9C%AF%E8%B4%B4/%E7%AE%97%E6%B3%95/%E6%B1%82%E6%9C%80%E5%A4%A7%E5%AD%90%E5%BA%8F%E5%88%97%E5%92%8C/)

***

# 买卖股票的最佳时机（二）

## 题目描述

与第一题相同，不同之处在于，**可以多次买卖股票，但是必须在上一次卖出后才能买下一次的股票**

示例 1:

> **输入**: `[7,1,5,3,6,4]`

> **输出**: 7

> **解释**: 在第 2 天（股票价格 = 1）的时候买入，在第 3 天（股票价格 = 5）的时候卖出, 这笔交易所能获得利润 = 5-1 = 4 。随后，在第 4 天（股票价格 = 3）的时候买入，在第 5 天（股票价格 = 6）的时候卖出, 这笔交易所能获得利润 = 6-3 = 3 。

示例 2:

> **输入**: `[1,2,3,4,5]`

> **输出**: 4

> **解释**: 在第 1 天（股票价格 = 1）的时候买入，在第 5 天 （股票价格 = 5）的时候卖出, 这笔交易所能获得利润 = 5-1 = 4 。注意你不能在第 1 天和第 2 天接连购买股票，之后再将它们卖出。因为这样属于同时参与了多笔交易，你必须在再次购买前出售掉之前的股票。

示例 3:

> **输入**: `[7,6,4,3,1]`

> **输出**: 0

> **解释**: 在这种情况下, 没有交易完成, 所以最大利润为 0。

## 解题思路

在峰底时买入，在峰顶时卖出, **所有的这样的差值都累加才会使得利润最大**

![](http://xwjpics.gumptlu.work/qiniu_picGo/20200529152315.png)

图中可以看出： A + B > C 
## 代码

```java
class Solution {
    //思路： 在峰底时买入，在峰顶时卖出
    public int maxProfit(int[] prices) {
        int bottom, top, len = prices.length, profit = 0, i = 0;
        while(i < len-1){
            while(i < len-1 && prices[i] >= prices[i+1]) ++i;
            bottom = i;
            while(i < len-1 && prices[i] <= prices[i+1]) ++i;
            top = i;
            profit += prices[top] - prices[bottom];
        }
        return profit;
    }
}
```
# 买卖股票的最佳时机（三）（困难难度）

## 题目描述

## 解题思路

## 代码



> 作者：gumptlu

>链接：https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/solution/he-qiu-zui-da-zi-xu-lie-he-hen-xiang-by-gumptlu/

>来源：力扣（LeetCode）

>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。