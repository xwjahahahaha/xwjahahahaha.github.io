---
title: 19.删除链表的倒数第N个结点
tags:
  - null
categories:
  - technical
  - leetcode
toc: true
date: 2022-01-13 00:26:42
---

## 题目描述

[19. 删除链表的倒数第 N 个结点](https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/)

难度中等

给你一个链表，删除链表的倒数第 `n` 个结点，并且返回链表的头结点。

<!-- more --> 

**示例 1：**

![img](http://xwjpics.gumptlu.work/qinniu_uPic/remove_ex1.jpg)

```
输入：head = [1,2,3,4,5], n = 2
输出：[1,2,3,5]
```

**示例 2：**

```
输入：head = [1], n = 1
输出：[]
```

**示例 3：**

```
输入：head = [1,2], n = 1
输出：[1]
```

 

**提示：**

- 链表中结点的数目为 `sz`
- `1 <= sz <= 30`
- `0 <= Node.val <= 100`
- `1 <= n <= sz`

**进阶：**你能尝试使用一趟扫描实现吗？

## 解题思路及代码

```go
/**
 * Definition for singly-linked list.
 * type ListNode struct {
 *     Val int
 *     Next *ListNode
 * }
 */
// 先遍历一遍然后删除
// 记得引入虚拟头节点防止删除原本的头节点
// 整体遍历了两遍，不是很好
// 时间复杂度O(N) 空间复杂度O(1)
func removeNthFromEnd(head *ListNode, n int) *ListNode {
    preHead, length := &ListNode{-1, head}, 0
    for p:=head; p!=nil; p=p.Next {
        length++
    }
    // 到达要删除节点的前一个节点
    p := preHead
    for i:=0; i<length-n; i++ {
        p = p.Next
    }
    // 删除
    p.Next = p.Next.Next
    return preHead.Next
}

// 栈，遍历一遍全部入栈然后出栈第n个就是要删除的节点，此时栈顶就是前一个节点
// 时间复杂度O(N) 空间复杂度O(N)
func removeNthFromEnd(head *ListNode, n int) *ListNode {
    stack := make([]*ListNode, 0)
    preHead := &ListNode{-1, head}
    for p:=preHead; p!=nil; p=p.Next {
        stack = append(stack, p)
    }    
    // 出栈
    for i:=0; i<n; i++ {
        stack = stack[:len(stack)-1]
    }
    // 用前一个节点删除目的节点
    sLen := len(stack)
    stack[sLen-1].Next = stack[sLen-1].Next.Next
    return preHead.Next
}

// 双指针固定长度
// 时间复杂度O(N) 空间复杂度O(1)
func removeNthFromEnd(head *ListNode, n int) *ListNode {
    preHead := &ListNode{-1, head}
    l, f := preHead, preHead
    // 先走n步
    for i:=0; i<n; i++ {
        f = f.Next
    }
    // 快指针到达最后一个节点就结束
    for f.Next != nil {
        f = f.Next
        l = l.Next
    }
    // 删除
    l.Next = l.Next.Next
    return preHead.Next
}
```

```go
/**
 * Definition for singly-linked list.
 * type ListNode struct {
 *     Val int
 *     Next *ListNode
 * }
 */
func removeNthFromEnd(head *ListNode, n int) *ListNode {
    if head == nil || n == 0 {
        return head
    }
    if head.Next == nil {
        return nil
    }
    preHead := &ListNode{}
    preHead.Next = head
    slow, fast := preHead, preHead
    // 找到倒数第n+1个节点位置
    for i:=0; i<n; i++ {
        fast = fast.Next
    }
    for fast != nil && fast.Next != nil {
        slow = slow.Next
        fast = fast.Next
    }
    slow.Next = slow.Next.Next
    return preHead.Next
}
```

二刷：

```go
/**
 * Definition for singly-linked list.
 * type ListNode struct {
 *     Val int
 *     Next *ListNode
 * }
 */

// 遍历一遍链表
func removeNthFromEnd(head *ListNode, n int) *ListNode {
    preHead := &ListNode{-1, head}
    sum := 0
    p := preHead.Next
    for p != nil {
        sum ++
        p = p.Next
    } 

    t := sum-n
    p = preHead
    for i:=0; i<t; i++ {
        p = p.Next
    }

    p.Next = p.Next.Next

    return preHead.Next
}

// 快慢指针,不用遍历一次链表
func removeNthFromEnd(head *ListNode, n int) *ListNode {
    preHead := &ListNode{-1, head}
    s, f := preHead, preHead
    for i:=0; i<n; i++ {
        f = f.Next
    }

    for f.Next != nil {
        f = f.Next
        s = s.Next
    }

    s.Next = s.Next.Next

    return preHead.Next
}
```

