---
title: 59.螺旋矩阵II
tags:
  - golang
categories:
  - technical
  - leetcode
toc: true
date: 2021-11-27 21:53:02
---

## 题目描述

[59. 螺旋矩阵 II](https://leetcode-cn.com/problems/spiral-matrix-ii/)

难度中等

给你一个正整数 `n` ，生成一个包含 `1` 到 `n2` 所有元素，且元素按顺时针顺序螺旋排列的 `n x n` 正方形矩阵 `matrix` 。

 <!-- more -->

**示例 1：**

![img](http://xwjpics.gumptlu.work/qinniu_uPic/spiraln.jpg)

```
输入：n = 3
输出：[[1,2,3],[8,9,4],[7,6,5]]
```

**示例 2：**

```
输入：n = 1
输出：[[1]]
```

 

**提示：**

- `1 <= n <= 20`

## 解题思路及代码

难点在于发现方向变化的规律，然后将整个过程模拟出来

```go
// 模拟过程
// 抓住方向的变化是有规律的，必须是右、下、左、上这样的次序
func generateMatrix(n int) [][]int {
    type pair struct { x, y int }
    direction := []pair{{0, 1}, {1, 0}, {0, -1}, {-1, 0}} // 分别表示右、下、左、上
    // 创建结果数组
    res := make([][]int, n)
    for i:=0; i<len(res); i++ {
        res[i] = make([]int, n)
    }
    // 模拟写入数字
    row, colum, directionIndex := 0, 0, 0   // directionIndex初始方向：右
    for i:=1; i<=n*n; i++ {
        // 写入当前位置数
        if row >=0 && row < n && colum >=0 && colum < n && res[row][colum] == 0 {
            // 位置合法则直接写入
            res[row][colum] = i
        }else {
            // 位置不合法则需要改变方向
            // 首先：回退自己上一步的操作
            row -= direction[directionIndex].x
            colum -= direction[directionIndex].y
            // 调整下一个方向
            directionIndex = (directionIndex + 1) % 4
            i--                 // 将本次的数取消掉，进入下一个循环再调整
        }
        row += direction[directionIndex].x
        colum += direction[directionIndex].y
    }
    return res
}
```

