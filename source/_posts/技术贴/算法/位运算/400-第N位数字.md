---
title: 400.第N位数字
tags:
  - null
categories:
  - technical
  - leetcode
toc: true
date: 2022-02-18 22:54:32
---

## 题目描述

[400. 第 N 位数字](https://leetcode-cn.com/problems/nth-digit/)

难度中等

给你一个整数 `n` ，请你在无限的整数序列 `[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, ...]` 中找出并返回第 `n` 位上的数字。

 <!-- more -->

**示例 1：**

```
输入：n = 3
输出：3
```

**示例 2：**

```
输入：n = 11
输出：0
解释：第 11 位数字在序列 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, ... 里是 0 ，它是 10 的一部分。
```

**提示：**

- `1 <= n <= 231 - 1`

## 解题思路及代码

```go
// 设第n个数字对应第的整数为target
// 1. 首先确定target是几位数？（设位数为digit）
// 2. 再确定target是该位数所有整数中的第几个
// 3. 最后再确定是taregt这个整数的第几位

// [1, 9] 共9个数，此区间共占9*1=9个位
// [10, 99] 共90个数，此区间共占9*10*2=180个位
// ...
// 推导得：digit位的整数区间共占：9*[10^(digit-1)]*digit 个位
func findNthDigit(n int) int {
    // 1. 从一位数开始循环累计和，直到最大且小于n，从而确定target是几位数
    i, sum := 0, 0
    for sum < n {
        i++
        sum += 9 * pow10(i-1) * i
    }
    digit := i

    // 2.确定在此位数中的位数和
    sum -= 9 * pow10(digit-1) * digit
    overflow := n - sum         
    // 3. 根据位数和除位数确定target
    target := pow10(digit-1)-1 + upRound(overflow, digit)      // 注意上取整
    // 4. 求余确定是target的第几位
    ansDigit := overflow%digit 
    if ansDigit == 0 {      // 注意：如果整数则代表最后一位
        return getDigitNum(target, digit, digit)
    }
    return getDigitNum(target, digit, ansDigit)
}

func pow10(i int) int {
    if i == 0 {
        return 1
    }
    if i == 1 {
        return 10
    }
    half := pow10(i/2)
    if i % 2 == 0 {
        return half*half
    }
    return half*half*10
}

// 向上取整
func upRound(a, b int) int {
    c := a / b 
    if c * b < a {
        return c+1
    }
    return c
}

// 获得整数某一位数字
func getDigitNum(num int, len int, d int) int {
    // fmt.Println(num, len, d)
    if d <= 0 || d > len {
        return -1
    }
    for i:=0; i<len-d; i++ {
        num /= 10
    }

    return num % 10
}
```

