---
title: 北大肖臻-第16讲-以太坊中的状态树
tags:
  - block_chain
categories:
  - knowledge
  - block_chain
  - xiaozhen_public_class
toc: true
date: 2020-07-03 20:10:37
---

# 第16讲 以太坊中的状态树

![](http://xwjpics.gumptlu.work/qiniu_picGo/52.jpg)

<!-- more -->

![](http://xwjpics.gumptlu.work/qiniu_picGo/53.jpg)

![](http://xwjpics.gumptlu.work/qiniu_picGo/54.jpg)

![](http://xwjpics.gumptlu.work/qiniu_picGo/55.jpg)



## Modified MPT 实例

![](http://xwjpics.gumptlu.work/qiniu_picGo/20200703200855.png)

具体Modify的地方在于：

1. Extension Node 和 Branch Node 与原生的MPT不同
2. prefix 分奇偶数个nibbles（16进制数）

每次状态改变的时候，不是原地修改的，而是新建一些分支，原来的状态其实是保留下来的，

![](http://xwjpics.gumptlu.work/qiniu_picGo/20200703202938.png)

所以，系统中的全节点每次都要重新构建一个MPT，不过大部分的节点都是上一次共享的，只需要新建修改的分支替代即可。

![](http://xwjpics.gumptlu.work/qiniu_picGo/20200703210500.png)

![](http://xwjpics.gumptlu.work/qiniu_picGo/20200703210833.png)
